<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Select Exercise</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<div th:replace="fragments/navbar :: navbar"></div>

<h2>Select an exercise</h2>

<!-- all one form = cleaner -->
<form method="get" th:action="@{/exercise}">

    <!-- Select category dropdown -->
    <div class="form-group">
        <label for="category-select">Category</label>
        <select id="category-select"
                name="categoryId"
                required
                onchange="this.form.submit();">

            <option value="">-- Select a category --</option>

            <option th:each="category : ${categories}"
                    th:value="${category.id}"
                    th:text="${category.categoryName}"
                    th:selected="${selectedCategoryId} == ${category.id}">
            </option>
        </select>
    </div>

    <!-- Select exercise dropdown -->
    <div class="form-group">
        <label for="exercise-select">Exercise</label>
        <select id="exercise-select" name="exerciseId"
                th:disabled="${#lists.isEmpty(exercises)}"
                onchange="this.form.submit();">

            <option value="">-- Select an exercise --</option>

            <option th:each="exercise : ${exercises}"
                    th:value="${exercise.id}"
                    th:text="${exercise.exerciseName}"
                    th:selected="${selectedExerciseId} == ${exercise.id}">
            </option>
        </select>
    </div>

    </form>

<form method="post" th:action="@{/workout-exercise}">
    <input type="hidden" name="exerciseId" th:value="${selectedExerciseId}">

    <!-- Add exercise button -->
    <!-- button is disabled if no exercise is selected -->
    <button type="submit"
            th:disabled="${selectedExerciseId == null}">
        Add Exercise
    </button>

</form>

<!-- Finish adding exercises button -->
<form th:action="@{/}" method="get">
    <button type="submit">Finish Adding Exercises</button>
</form>
</body>
</html>

