<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8"/>
    <title th:text="${workoutExercise.exercise.exerciseName}">Exercise</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet"/>

    <style>
        body {
          background: linear-gradient(180deg, #ffffff 0%, #f5f7fa 100%);
          min-height: 100vh;
        }

        .page-shell { max-width: 720px; }

        .card-modern {
          background: rgba(255,255,255,.95);
          border-radius: 16px;
          padding: 20px;
          box-shadow: 0 8px 20px rgba(0,0,0,.05);
        }

        .exercise-title {
          font-weight: 800;
          margin-bottom: .25rem;
        }

        .exercise-meta {
          color: #6c757d;
          margin-bottom: 1rem;
        }

        .set-card {
          border-radius: 14px;
          padding: 16px;
          background: rgba(0,0,0,.03);
        }

        .danger-zone {
          border: 1px solid #dc3545;
          border-radius: 14px;
          padding: 16px;
        }
    </style>
</head>

<body>
<div th:replace="~{fragments/mobile_navbar :: mobileNavbar('history')}"></div>

<div class="container mt-4 page-shell">

    <div class="card-modern">

        <!-- Exercise header -->
        <h1 class="exercise-title"
            th:text="${workoutExercise.exercise.exerciseName}">
            Exercise Name
        </h1>

        <div class="exercise-meta">
            Category:
            <span th:text="${workoutExercise.exercise.category.categoryName}"></span>
        </div>

        <!-- Notes -->
        <form th:action="@{/workout-exercise/{id}/notes(id=${workoutExercise.id})}" method="post">
            <div class="mb-3">
                <label class="form-label fw-semibold">Notes</label>
                <textarea class="form-control"
                          name="notes"
                          rows="3"
                          th:text="${workoutExercise.notes}">
                </textarea>
            </div>

            <button class="btn btn-outline-primary w-100 mb-4">
                <i class="bi bi-check-circle"></i>
                Save Notes
            </button>
        </form>

        <!-- Sets -->
        <h5 class="fw-bold mb-3">Sets</h5>

        <div class="d-grid gap-3">
            <div th:each="s : ${sets}" class="set-card">

                <form th:action="@{/set}" method="post">

                    <input type="hidden" name="workoutExerciseId"
                           th:value="${workoutExercise.id}"/>
                    <input type="hidden" name="setId"
                           th:value="${s.id}"/>
                    <input type="hidden" name="exerciseId"
                           th:value="${workoutExercise.exercise.id}"/>

                    <div class="fw-semibold mb-2">
                        Set <span th:text="${s.setNumber}"></span>
                    </div>

                    <div class="row g-2 mb-3">
                        <div class="col">
                            <label class="form-label">Reps</label>
                            <input type="number"
                                   class="form-control"
                                   name="reps"
                                   th:value="${s.reps}"/>
                        </div>

                        <div class="col">
                            <label class="form-label">Weight (kg)</label>
                            <input type="number"
                                   class="form-control"
                                   name="weightKg"
                                   th:value="${s.weightKg}"/>
                        </div>
                    </div>

                    <button class="btn btn-outline-primary w-100">
                        Update
                    </button>
                </form>
            </div>
        </div>

        <!-- Delete exercise -->
        <div class="danger-zone mt-4 text-center">
            <form th:action="@{/workout-exercise/{id}/delete(id=${workoutExercise.id})}"
                  method="post"
                  onsubmit="return confirm('Delete this exercise from the workout?');">

                <button class="btn btn-outline-danger w-100">
                    <i class="bi bi-trash"></i>
                    Delete Exercise
                </button>
            </form>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
